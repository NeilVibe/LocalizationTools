# Code Review Issues - 2025-12-12

**Review Date:** 2025-12-12 | **Reviewer:** Claude

---

## Issue Format

```
[x] FIXED: One-liner how it was fixed
[ ] OPEN: Not fixed yet
```

---

## HIGH Priority

### ISS-001: Duplicate Progress Trackers (3 files)
**[ ] OPEN**

- `server/tools/xlstransfer/progress_tracker.py` (188 LOC) - OLD
- `server/utils/client/progress.py` (~180 LOC) - OLD
- `server/utils/progress_tracker.py` (342 LOC) - NEW

**Fix:** Migrate all to new TrackedOperation, delete old files.

---

### ISS-002: TrackedOperation Not Used Anywhere
**[ ] OPEN**

New Factor Power context manager created but applied to NOTHING.

**Fix:** Add `with TrackedOperation(...)` to all long-running backend ops.

---

### ISS-003: normalize_text Duplicated 4x
**[ ] OPEN**

- `server/tools/kr_similar/core.py:13`
- `server/tools/ldm/file_handlers/txt_handler.py:19`
- `server/tools/ldm/file_handlers/xml_handler.py:18`
- `server/tools/quicksearch/parser.py:17`

**Fix:** Create `server/utils/text_utils.py`, move there, update imports.

---

## MEDIUM Priority

### ISS-004: 98 print() Statements
**[ ] OPEN**

Should use `logger` not `print()`.

**Fix:** Replace with loguru logger calls.

---

### ISS-005: 41 console.log (Frontend)
**[ ] OPEN**

Should use custom logger or remove.

**Fix:** Audit and replace/remove.

---

### ISS-006: 7 Stale TODO Comments
**[ ] OPEN**

- `server/tools/ldm/tm.py:132`
- `server/api/progress_operations.py:111`
- `server/utils/client/logger.py:280`
- `server/tasks/background_tasks.py:22,47,70,95`

**Fix:** Implement or remove with reason.

---

### ISS-007: LDM No Progress Tracking
**[ ] OPEN**

LDM operations invisible in TaskManager.

**Fix:** Add TrackedOperation to LDM API endpoints.

---

## LOW Priority

### ISS-008: 18 Files >500 LOC
**[ ] OPEN**

Large files - may need splitting. Top: stats.py (1378), ldm/api.py (1304).

**Fix:** Review if any should split. Probably fine.

---

### ISS-009: background_tasks.py Stubs
**[ ] OPEN**

4 functions with only `# TODO: Implement` inside.

**Fix:** Implement or remove.

---

## Summary

| Priority | Total | Fixed |
|----------|-------|-------|
| HIGH | 3 | 0 |
| MEDIUM | 4 | 0 |
| LOW | 2 | 0 |
| **TOTAL** | **9** | **0** |

---

## Recommended Fix Order

1. ISS-003: normalize_text (quick win)
2. ISS-001: Progress tracker consolidation
3. ISS-002: Apply TrackedOperation
4. ISS-007: LDM progress tracking
5. ISS-004: print() â†’ logger
6. ISS-006: TODO cleanup
7. ISS-005: console.log cleanup
8. ISS-008: Large files (later)
9. ISS-009: Stubs (later)

---

*Last updated: 2025-12-12*
